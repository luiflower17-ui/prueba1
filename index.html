<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Predicción de inundaciones en CDMX</title>

    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900;1000&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <link rel="stylesheet" href="styles.css">

</head>
<body>

<audio id="click-sound" src="click_sound.mp3" preload="auto"></audio>


<div class="video-background">
    <div class="video-overlay"></div>
    <iframe
        id="youtube-background"
        src="https://www.youtube.com/embed/6E4qvlqMT2A?controls=0&rel=0&autoplay=1&loop=1&mute=1&playlist=6E4qvlqMT2A"
        frameborder="0"
        allow="autoplay; encrypted-media; loop"
        allowfullscreen>
    </iframe>
</div>

<main>
    <header>
        <div class="header-branding">
            <h1>Predicción de inundaciones en CDMX</h1>
            <p class="header-subtitle">
                Herramienta digital para la detección temprana de riesgo de inundación.
            </p>
        </div>
        <div class="header-meta">
            <p class="meta-line">Gobierno de la Ciudad de México | Universidad Nacional Rosario Castellanos (UNRC)</p>
            <p class="meta-line">Proyecto Prototípico: Aliza Ramírez, Giovanni Morales, Luis Flores</p>
        </div>
    </header>
    
    <div class="theme-switch-wrapper">
        <label for="theme-checkbox" id="theme-label">Modo Claro</label>
        <label class="theme-switch" for="theme-checkbox">
            <input type="checkbox" id="theme-checkbox" />
            <div class="slider round"></div>
        </label>
    </div>
    <section id="project-overview" class="fade-in">
        
        <h2 class="section-title"><i class="fas fa-book-open"></i> Puntos clave del proyecto</h2>
        <div class="carousel-container">
            <div class="carousel-track" id="carousel-track">
                
                <div class="carousel-card active-card" data-target="content-problema">
                    <h4>1. Problema y antecedentes</h4>
                    <i class="fas fa-exclamation-triangle card-icon"></i>
                    <p>La CDMX es altamente vulnerable. La <b>Gran Inundación de 1629</b> es un antecedente clave.</p>
                    <span class="card-action-hint">Haz clic para ver más...</span>
                </div>

                <div class="carousel-card" data-target="content-objetivos">
                    <h4>2. Objetivos y justificación</h4>
                    <i class="fas fa-bullseye card-icon"></i>
                    <p>Desarrollar una plataforma predictiva que reduzca el impacto del riesgo de inundación.</p>
                    <span class="card-action-hint">Haz clic para ver más...</span>
                </div>

                <div class="carousel-card" data-target="content-marco">
                    <h4>3. Marco teórico y factores</h4>
                    <i class="fas fa-book card-icon"></i>
                    <p>El proyecto se enfoca en inundaciones <b>pluviales</b>, agravadas por la subsidencia y la obstrucción.</p>
                    <span class="card-action-hint">Haz clic para ver más...</span>
                </div>

                <div class="carousel-card" data-target="content-impacto">
                    <h4>4. Zonas de impacto y riesgo</h4>
                    <i class="fas fa-map-marked-alt card-icon"></i>
                    <p>Tlalpan (19%) e Iztapalapa (18%) concentran la mayor parte de los reportes (datos C5).</p>
                    <span class="card-action-hint">Haz clic para ver más...</span>
                </div>

                <div class="carousel-card" data-target="content-prediccion">
                    <h4>5. Modelos de predicción</h4>
                    <i class="fas fa-chart-line card-icon"></i>
                    <p>Uso de referencias como el Atlas de Riesgos del EDOMEX y el Mapa <b>Hidrográfico</b> Urbano (MHU).</p>
                    <span class="card-action-hint">Haz clic para ver más...</span>
                </div>

                <div class="carousel-card" data-target="content-ejemplo">
                    <h4>6. Caso de estudio: Zócalo</h4>
                    <i class="fas fa-flask card-icon"></i>
                    <p>Ejemplo de aplicación del modelo considerando intensidad de lluvia, obstrucción y exposición.</p>
                    <span class="card-action-hint">Haz clic para ver más...</span>
                </div>
                
                <div class="carousel-card" data-target="content-algoritmo">
                    <h4>7. Diseño del algoritmo (Simulador)</h4>
                    <i class="fas fa-code card-icon"></i>
                    <p>Modelo <b>algorítmico</b> conceptual para clasificar el riesgo en niveles de alerta temprana.</p>
                    <span class="card-action-hint">Haz clic para ver más...</span>
                </div>

                <div class="carousel-card" data-target="content-preventivas">
                    <h4>8. Medidas preventivas</h4>
                    <i class="fas fa-hands-helping card-icon"></i>
                    <p>La prevención incluye la limpieza de cañadas y la implementación de <b>infraestructura verde</b>.</p>
                    <span class="card-action-hint">Haz clic para ver más...</span>
                </div>
                
                <div class="carousel-card" data-target="content-referencias">
                    <h4>9. Referencias</h4>
                    <i class="fas fa-clipboard-list card-icon"></i>
                    <p>Listado de fuentes bibliográficas utilizadas en la investigación y el desarrollo del prototipo.</p>
                    <span class="card-action-hint">Haz clic para ver más...</span>
                </div>

                <div class="carousel-card" data-target="content-conclusiones">
                    <h4>10. Conclusiones</h4>
                    <i class="fas fa-check-circle card-icon"></i>
                    <p>Resumen de los hallazgos clave y el impacto potencial de la herramienta.</p>
                    <span class="card-action-hint">Haz clic para ver más...</span>
                </div>

            </div>
            <button class="carousel-btn prev-btn"><i class="fas fa-chevron-left"></i></button>
            <button class="carousel-btn next-btn"><i class="fas fa-chevron-right"></i></button>
        </div>


        <h2 class="section-title" style="margin-top: 50px;"><i class="fas fa-file-alt"></i> Documentación detallada del proyecto de investigación</h2>

        <div id="interactive-content">
            <div id="detail-panel" class="detail-panel-full"> 

                <div id="content-problema" class="content-detail active">
                    <h3>1. Problema de investigación y antecedentes</h3>
                    <p class="section-intro">El proyecto aborda la creciente <b>vulnerabilidad de la CDMX</b> ante las inundaciones, un fenómeno que combina factores <b>geológicos</b>, climáticos y sociales. </p>

                    <div class="info-grid">
                        <div class="info-block full-width">
                            <h4>Contexto Histórico: La Gran Inundación de 1629</h4>
                            <p>La <b>Gran Inundación de 1629</b>, que mantuvo a la ciudad bajo el agua por 5 años, es un antecedente clave de la vulnerabilidad de la cuenca. Este evento marcó el inicio de las grandes obras de desagüe y el cambio de enfoque de convivencia con el lago a su desecación. Este precedente histórico refuerza la necesidad de herramientas predictivas modernas.</p>
                        </div>
                        <div class="info-block">
                            <h4>Problema de investigación</h4>
                            <p>La Ciudad de México presenta un alto índice de inundaciones debido a su ubicación en una cuenca cerrada, el cambio climático y la <b>impermeabilización del suelo</b> por el crecimiento urbano descontrolado. El registro de la temporada de lluvias 2025 superó volúmenes históricos, acentuando la vulnerabilidad del sistema de drenaje y desalojo.</p>
                        </div>
                        <div class="info-block">
                            <h4>Antecedentes (raíces históricas y geográficas)</h4>
                            <p>La urbe se construyó sobre el antiguo <b>lago de Texcoco</b>, un subsuelo lacustre que, al ser desecado y cubierto con infraestructura, ha perdido capacidad de filtración y sufre de <b>hundimiento diferencial</b> (subsidencia). El reto de la gestión del agua ha requerido obras de gran magnitud, como el Túnel Emisor Oriente (TEO).</p>
                        </div>
                    </div>
                </div>

                <div id="content-objetivos" class="content-detail">
                    <h3>2. Objetivos y justificación</h3>
                    <p class="section-intro">Definición del propósito central del proyecto y la relevancia de su aplicación para la gestión de riesgos en la capital.</p>

                    <div class="info-grid two-columns">
                        <div class="info-block">
                            <h4>Objetivo general</h4>
                            <p>Analizar los factores <b>geológicos</b> y sociales que detonan las inundaciones en la CDMX para <b>reducir el impacto</b> en la vida y el patrimonio de los ciudadanos mediante una herramienta de alerta temprana.</p>
                        </div>
                        <div class="info-block">
                            <h4>Justificación (la necesidad del proyecto)</h4>
                            <p>La <b>prevención de desastres</b> naturales se ha vuelto prioritaria. Una <b>herramienta digital predictiva</b> es fundamental para orientar los recursos de Protección Civil y SACMEX, permitiendo una intervención rápida y enfocada antes de la saturación del sistema de drenaje.</p>
                        </div>
                    </div>

                    <div class="info-block full-width">
                        <h4>Objetivos específicos</h4>
                        <ul>
                            <li>Recabar y procesar datos históricos de precipitación, hundimiento del suelo, reportes de basura y fallas del drenaje (C5 y SACMEX).</li>
                            <li>Diseñar un modelo predictivo que clasifique el riesgo de inundación en áreas específicas (e.g., celdas de $500 \text{m} \times 500 \text{m}$) en función de las variables de entrada.</li>
                            <li>Visualizar las zonas de riesgo en tiempo real y emitir alertas tempranas.</li>
                        </ul>
                    </div>
                </div>

                <div id="content-marco" class="content-detail">
                    <h3>3. Marco teórico y factores críticos</h3>
                    <p class="section-intro">Definiciones clave para el análisis del riesgo de inundación, incluyendo la tipología y los principales factores <b>geológicos</b> y sociales que amplifican el riesgo.</p>

                    <div class="info-grid">
                        <div class="info-block">
                            <h4>Tipología de las inundaciones</h4>
                            <p>Este proyecto se enfoca en tres tipos principales:</p>
                            <ul>
                                <li><b>Inundaciones Pluviales:</b> Originadas por lluvias intensas que exceden la capacidad del drenaje. Son el foco principal.</li>
                                <li><b>Inundaciones Urbanas:</b> Se agravan por la <b>impermeabilización</b> del suelo, generando escorrentía superficial masiva.</li>
                                <li><b>Inundaciones Fluviales:</b> Causadas por el desbordamiento de ríos (menos relevante en el centro de la CDMX).</li>
                            </ul>
                        </div>
                        <div class="info-block">
                            <h4>Factor <b>geológico</b> crítico: Subsidencia</h4>
                            <p>El <b>hundimiento diferencial</b> (subsidencia), causado por la sobre-extracción de agua de los acuíferos, modifica las pendientes naturales del terreno. Este cambio <b>geológico</b> <b>obstaculiza el flujo</b> por gravedad en el drenaje y es una de las causas principales de las fallas del sistema.</p>
                        </div>
                        <div class="info-block full-width">
                            <h4>Factor antropogénico: Obstrucción por residuos</h4>
                            <p>La <b>disposición inadecuada de basura</b> en las calles es el factor social más relevante. La acumulación de residuos en alcantarillas y colectores es responsable de <b>más del 50% de los bloqueos</b> que impiden el desalojo eficiente del agua pluvial. Este factor tiene un impacto desproporcionado en la eficiencia del sistema. </p>
                            <p>La combinación de <b>lluvia intensa (C)</b>, la <b>obstrucción por basura (P)</b> y la <b>subsidencia</b> provoca que la capacidad de desalojo sea rebasada periódicamente, incluso con grandes obras de drenaje como el TEO.</p>
                        </div>
                    </div>
                </div>

                <div id="content-impacto" class="content-detail">
                    <h3>4. Zonas de impacto y riesgo</h3>
                    <p class="section-intro">Identificación de las alcaldías más vulnerables basada en reportes históricos del C5 y el impacto en la infraestructura de transporte.</p>
                    
                    <div class="info-grid two-columns">
                        <div class="info-block">
                            <h4>Alcaldías con mayor incidencia (reportes C5, 2025)</h4>
                            <ol class="alcaldias-list">
                                <li data-percentage="19%"><b>Tlalpan</b> (19%)</li>
                                <li data-percentage="18%"><b>Iztapalapa</b> (18%)</li>
                                <li data-percentage="10%">Gustavo A. Madero (10%)</li>
                                <li data-percentage="10%">Xochimilco (10%)</li>
                                <li data-percentage="9%">Tláhuac (9%)</li>
                            </ol>
                            <p>Estas alcaldías, particularmente las dos primeras, presentan mayor acumulación de factores de riesgo (terreno de bajo relieve y alta densidad poblacional/<b>impermeabilización</b>).</p>
                        </div>
                        <div class="info-block">
                            <h4>Impacto en infraestructura urbana y el transporte</h4>
                            <p>Se estima que el <b>33%</b> de los daños a la infraestructura vial es causado por las fuertes lluvias. Las inundaciones también provocan filtraciones y cierre de operaciones en el <b>AICM</b> y la interrupción parcial del servicio del <b>Metro y Metrobús</b>, afectando a millones de usuarios.</p>
                            <p>Las zonas con mayor riesgo son las que presentan menor pendiente y mayor densidad poblacional e <b>impermeabilización</b> (variable de Exposición $\mathbf{E}$).</p>
                        </div>
                    </div>
                </div>

                <div id="content-prediccion" class="content-detail">
                    <h3>5. Modelos de predicción</h3>
                    <p class="section-intro">El proyecto se basa en la conceptualización y uso de herramientas existentes para la gestión de riesgos en la cuenca.</p>

                    <div class="info-grid two-columns">
                        <div class="info-block">
                            <h4>Mapa Hidrográfico Urbano (MHU)</h4>
                            <p>Herramienta clave desarrollada por la UNAM que permite la localización de áreas sensibles al encharcamiento, usando información topográfica y datos de pendientes. El MHU es una base esencial para definir las variables de <b>vulnerabilidad histórica ($\mathbf{M}$)</b> en nuestro <b>algoritmo</b>.</p>
                        </div>
                        <div class="info-block">
                            <h4>Atlas de riesgos</h4>
                            <p>Los Atlas de riesgos, especialmente los del Estado de México, proporcionan una zonificación de peligros que complementa la visión del MHU, incorporando riesgos <b>geológicos</b> y socioeconómicos que influyen en la variable de <b>Exposición ($\mathbf{E}$)</b> del modelo.</p>
                        </div>
                    </div>
                </div>
                
                <div id="content-ejemplo" class="content-detail">
                    <h3>6. Caso de estudio: Zócalo (Centro Histórico)</h3>
                    <p class="section-intro">Aplicación del modelo conceptual a una zona crítica de la CDMX para entender la lógica de la alerta temprana.</p>

                    <div class="info-grid single-column">
                        <div class="info-block full-width">
                            <h4>Contexto local: Zócalo (Centro Histórico)</h4>
                            <p>En 2025 hubo <b>récord de acumulado</b>, $50 \text{ mm}$ por $20 \text{ min}$. Esto quiere decir que, aunque la duración sea corta, la <b>severidad y afectación es muy alta</b>. Además, podemos inferir que la zona tiene mayor obstrucción de basura, lo que eleva el riesgo de inundación.</p>

                            <h5 class="step-title">Paso 1. Intensidad de Lluvia ($\mathbf{C}$)</h5>
                            <ul>
                                <li><b>Intensidad Pico:</b> $50 \text{ mm}$ por $20 \text{ min}$ es alta (+).</li>
                                <li><b>Acumulado 6h:</b> Si en las horas previas ya hubo chubascos y las coladeras se saturan, este índice es alto (+).</li>
                                <li><b>Duración:</b> $20 \text{ min}$ de lluvia es suficiente para ver inundación en la plancha y calles aledañas.</li>
                            </ul>

                            <h5 class="step-title">Paso 2. Medir la Capacidad efectiva de la zona ($\mathbf{K}$)</h5>
                            <ul>
                                <li><b>Red y pendientes:</b> Según datos del MHU, el centro histórico tiene conexiones a drenaje profundo, pero tiene bajo relieve y <b>subsidencia</b>, lo que reduce la capacidad de desalojo ($\mathbf{K}$).</li>
                                <li><b>Obstrucción ($\mathbf{P}$):</b> Basura y hojas en coladeras es un factor constante en esta zona.</li>
                            </ul>
                            
                            <h5 class="step-title">Paso 3. Estimar la Probabilidad ($\mathbf{P_{evento}}$)</h5>
                            <p>Si cae lluvia intensa y hay obstrucciones, la relación $\mathbf{C}/\mathbf{K}$ es alta. Esta relación nos da la <b>Probabilidad de evento ($\mathbf{P_{evento}}$)</b>.</p>
                            <p>$$\mathbf{P_{evento}} \approx \frac{\mathbf{C}}{\mathbf{K}}$$</p>
                            <blockquote class="note-quote">
                                A partir de la lectura que se le hace a $\mathbf{C}$ o $\mathbf{K}$ y del historial de esa zona (si se inunda seguido), se estima una probabilidad de que ocurra encharcamiento o inundación.
                            </blockquote>

                            <h5 class="step-title">Paso 4. Checar la Severidad en esa zona ($\mathbf{S}$)</h5>
                            <p><b>Exposición ($\mathbf{E}$):</b> Es un lugar turístico, con alto paso peatonal-vehicular y actividad de comercio. Además, tiene la Línea 2 de Metro subterránea. Se vuelve una zona de <b>muy alta probabilidad</b> de afectación (alta Severidad $\mathbf{S}$).</p>

                            <h5 class="step-title">Paso 5. Resultado y Acciones preventivas</h5>
                            <p>El resultado del análisis desencadena acciones concretas:</p>
                            <table class="alert-table">
                                <thead>
                                    <tr>
                                        <th>Alerta</th>
                                        <th>Condición</th>
                                        <th>Acción Preventiva</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="alert-green">
                                        <td>Verde</td>
                                        <td>P baja o S bajo</td>
                                        <td>Solo monitoreo.</td>
                                    </tr>
                                    <tr class="alert-yellow">
                                        <td>Amarillo</td>
                                        <td>P media</td>
                                        <td>Limpiar coladeras cercanas y avisar a vecinos.</td>
                                    </tr>
                                    <tr class="alert-orange">
                                        <td>Naranja</td>
                                        <td>P alta</td>
                                        <td>Mandar cuadrillas y preparar desvíos viales.</td>
                                    </tr>
                                    <tr class="alert-red">
                                        <td>Rojo</td>
                                        <td>P muy alta o rebase reciente</td>
                                        <td>Cierres puntuales y bombas móviles.</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div id="content-algoritmo" class="content-detail">
                    <h3>7. Diseño del algoritmo (Simulador)</h3>
                    <p class="section-intro">Detalles técnicos del modelo conceptual de predicción y la herramienta de simulación utilizada en este proyecto.</p>
                    
                    <div id="simulation-area" class="simulation-card">
                        <div class="sim-inputs">
                            <div class="input-group">
                                <label for="alcaldia-select"><i class="fas fa-map-marker-alt"></i> 1. Vulnerabilidad histórica (Alcaldía / Multiplicador M)</label>
                                <select id="alcaldia-select">
                                    <option value="1.4">Tlalpan (M=1.4)</option>
                                    <option value="1.3">Iztapalapa (M=1.3)</option>
                                    <option value="1.1">Gustavo A. Madero (GAM) / Xochimilco (M=1.1)</option>
                                    <option value="1.0">Tláhuac (M=1.0)</option>
                                    <option value="0.8">Otra alcaldía (M=0.8)</option>
                                </select>
                            </div>

                            <div class="input-group">
                                <label for="lluvia-input"><i class="fas fa-cloud-showers-heavy"></i> 2. Lluvia (C, Nivel de 0 a 3)</label>
                                <input type="range" id="lluvia-input" min="0" max="3" step="0.1" value="1.5" oninput="document.getElementById('lluvia-val').textContent=this.value">
                                <span class="range-value">Valor C: <span id="lluvia-val">1.5</span></span>
                            </div>

                            <div class="input-group">
                                <label for="obstruccion-input"><i class="fas fa-trash-alt"></i> 3. Obstrucción (P, Nivel de 0 a 3)</label>
                                <input type="range" id="obstruccion-input" min="0" max="3" step="0.1" value="1.5" oninput="document.getElementById('obstruccion-val').textContent=this.value">
                                <span class="range-value">Valor P: <span id="obstruccion-val">1.5</span></span>
                            </div>

                            <div class="input-group">
                                <label for="exposicion-input"><i class="fas fa-building"></i> 4. Exposición (E, Nivel de 0 a 3)</label>
                                <input type="range" id="exposicion-input" min="0" max="3" step="1" value="1" oninput="document.getElementById('exposicion-val').textContent=this.value">
                                <span class="range-value">Valor E: <span id="exposicion-val">1</span></span>
                            </div>
                        </div>

                        <button onclick="calcularRiesgo()">
                            <i class="fas fa-calculator"></i> Calcular riesgo (R)
                        </button>

                        <div id="sim-result" class="result-box">
                            <p>Resultado del simulador:</p>
                            <p id="riesgo-texto" class="risk-level pending">Esperando datos...</p>
                        </div>

                        <p class="colab-link-text">
                            <i class="fas fa-code"></i> Consulta el código original de la simulación en: 
                            <a href="https://colab.research.google.com/drive/1QZGbNwUbsDe2hNXoZ2ShXIT4115ufMUO?usp=sharing" target="_blank">Google Colab</a>
                        </p>
                    </div>

                    <div class="info-block full-width formula-block">
                        <h4>Fórmula conceptual utilizada</h4>
                        <p>$$R = C + P + E \times M$$</p>
                    </div>

                    <div class="info-grid two-columns">
                        <div class="info-block">
                            <h4>Clasificación de riesgo</h4>
                            <ul>
                                <li><b>Riesgo Cero:</b> $C = 0.0$ (Verde)</li>
                                <li><b>Riesgo Bajo:</b> $C > 0.0$ y $R < 4.0$ (Amarillo)</li>
                                <li><b>Riesgo Medio:</b> $4.0 \le R < 6.0$ (Naranja)</li>
                                <li><b>Riesgo Alto:</b> $R \ge 6.0$ (Rojo)</li>
                            </ul>
                            <p>El valor de $R$ es un índice normalizado que permite la toma de decisiones por niveles de alerta.</p>
                        </div>
                        <div class="info-block">
                            <h4>Definición de variables</h4>
                            <ul>
                                <li><b>$C$ (Clima):</b> Nivel de precipitación. Rango $0.0$ a $3.0$.</li>
                                <li><b>$P$ (Obstrucción):</b> Nivel de contaminación/basura. Rango $0.0$ a $3.0$.</li>
                                <li><b>$E$ (Exposición):</b> Nivel de infraestructura/vulnerabilidad. Rango $0$ a $3$ (Discreto).</li>
                                <li><b>$M$ (Multiplicador):</b> Nivel de riesgo histórico de la alcaldía. Valor fijo (e.g., Tlalpan = $1.4$).</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div id="content-preventivas" class="content-detail">
                    <h3>8. Medidas preventivas</h3>
                    <p class="section-intro">Recomendaciones clave para la ciudadanía y las autoridades para mitigar el riesgo de inundación.</p>

                    <div class="info-grid">
                        <div class="info-block">
                            <h4>Acciones preventivas (antes de la lluvia)</h4>
                            <ul>
                                <li><b>No tirar basura en la vía pública:</b> mantener limpias las coladeras y alcantarillas.</li>
                                <li>Limpiar azoteas, canales y desagües.</li>
                                <li>Revisar el estado de la <b>impermeabilización</b> de viviendas.</li>
                            </ul>
                        </div>
                        <div class="info-block">
                            <h4>Acciones durante y después de la lluvia</h4>
                            <ul>
                                <li>No intentar cruzar corrientes de agua.</li>
                                <li>Desconectar la energía eléctrica en caso de encharcamiento grave.</li>
                                <li>Evitar caminar o conducir por corrientes de agua.</li>
                                <li>Reportar de inmediato a las autoridades (C5) cualquier encharcamiento.</li>
                            </ul>
                        </div>
                        <div class="info-block full-width">
                            <h4>Infraestructura Verde (zonas verdes) como solución</h4>
                            <p>El proyecto sugiere la adopción de <b>infraestructura verde</b> (techos verdes, pavimentos permeables, jardines de lluvia) para aumentar la infiltración y reducir la carga sobre el sistema de drenaje. Las zonas verdes urbanas funcionan como esponjas naturales, absorbiendo el exceso de agua pluvial y mitigando el efecto de la escorrentía superficial. </p>
                        </div>
                    </div>
                </div>

                <div id="content-referencias" class="content-detail">
                    <h3>9. Referencias bibliográficas</h3>
                    <ul class="references-list">
                        <li>(2019, 26 de abril). Causas de las inundaciones. *Tierra y Tecnología*. <a href="https://www.icog.es/TyT/index.php/2014/10/causas-las-inundaciones/" target="_blank">https://www.icog.es/TyT/index.php/2014/10/causas-las-inundaciones/</a></li>
                        <li>*<b>[Ciudad de México anegada]</b>*. (s. f.). Mediateca - Instituto Nacional de Antropología e Historia. <a href="https://mediateca.inah.gob.mx/islandora_74/islandora/object/mapa:176" target="_blank">https://mediateca.inah.gob.mx/islandora_74/islandora/object/mapa:176</a></li>
                        <li>Coordinación General de Protección Civil y Gestión Integral del Riesgo. (s. f.). *Atlas de riesgos del Estado de México*. <a href="https://cgproteccioncivil.edomex.gob.mx/atlas-riesgos" target="_blank">https://cgproteccioncivil.edomex.gob.mx/atlas-riesgos</a></li>
                        <li>EcoExploratorio. (2022, 31 de agosto). Tipos de inundación. *EcoExploratorio: Museo de Ciencias de Puerto Rico*. <a href="https://ecoexploratorio.org/amenazas-naturales/inundaciones/tiposde-inundacion/" target="_blank">https://ecoexploratorio.org/amenazas-naturales/inundaciones/tiposde-inundacion/</a></li>
                        <li>Estrada, L. (2025, 3 de septiembre). CDMX frente al agua: inundaciones, causas y vías para actuar. *Tecnológico de Monterrey*. <a href="https://conecta.tec.mx/es/noticias/nacional/sostenibilidad/cdmx-frente-al-aguainundaciones-causas-y-vias-para-actuar" target="_blank">https://conecta.tec.mx/es/noticias/nacional/sostenibilidad/cdmx-frente-al-aguainundaciones-causas-y-vias-para-actuar"</a></li>
                        <li>Hernández-Espinosa, A., Otazo-Sánchez, E., Román-Gutiérrez, A., & Romo-Gómez, C. (2021, 5 de julio). El sistema de drenaje de la Ciudad de México. *AmeliCA*. <a href="https://portal.amelica.org/ameli/journal/595/5952727008/html/" target="_blank">https://portal.amelica.org/ameli/journal/595/5952727008/html/</a></li>
                        <li>Indicadores de lluvia. (s. f.). *Sistema de Aguas de la Ciudad de México (SACMEX)*. <a href="https://charcos.sacmex.cdmx.gob.mx/monthlyprecipitation-graph" target="_blank">https://charcos.sacmex.cdmx.gob.mx/monthlyprecipitation-graph</a></li>
                        <li>López, A. I., López, A. I., & López, A. I. (2025, 30 de agosto). El hundimiento de Ciudad de México, un factor desestimado que agrava las inundaciones en la capital. *El País México*. <a href="https://elpais.com/mexico/2025-08-30/el-hundimiento-deciudad-de-mexico-un-factor-desestimado-que-agrava-las-inundaciones-en-lacapital.html" target="_blank">https://elpais.com/mexico/2025-08-30/el-hundimiento-deciudad-de-mexico-un-factor-desestimado-que-agrava-las-inundaciones-en-lacapital.html</a></li>
                        <li>Mercado Libre. (2025, 30 de julio). Re: Alcaldías CDMX que más se inundan 2025. *Mercado Libre Blog*. <a href="https://www.mercadolibre.com.mx/blog/re-alcaldias-cdmx-que-mas-se-inundan2025" target="_blank">https://www.mercadolibre.com.mx/blog/re-alcaldias-cdmx-que-mas-se-inundan2025</a></li>
                        <li>Redacción. (2025, 2 de noviembre). ¿Qué es el Mapa Hidrográfico Urbano de la CDMX? Así funciona la herramienta para prevenir daños por inundaciones: esto dice la UNAM. *Eje Central*. <a href="https://www.ejecentral.com.mx/nuestro-eje/quees-el-mapa-hidrografico-urbano-de-la-cdmx-asi-funciona-la-herramienta-paraprevenir-danos-por-inundaciones-esto-dice-la-unam" target="_blank">https://www.ejecentral.com.mx/nuestro-eje/quees-el-mapa-hidrografico-urbano-de-la-cdmx-asi-funciona-la-herramienta-paraprevenir-danos-por-inundaciones-esto-dice-la-unam</a></li>
                        <li>Redacción. (2025, 1 de noviembre). Lluvias 2025, las más intensas del siglo: experta UAM. *CDMX Magacín*. <a href="https://cdmx.info/lluvias-2025-las-masintensas-del-siglo-experta-uam/" target="_blank">https://cdmx.info/lluvias-2025-las-masintensas-del-siglo-experta-uam/</a></li>
                        <li>Torres, B. (2025, 1 de agosto). ¿Dónde llueve más y por qué? Mapeo de inundaciones en CDMX desde el espacio. *UNAM Global*. <a href="https://unamglobal.unam.mx/global_revista/inundaciones-cdmx-mapa-satelitalriesgo/" target="_blank">https://unamglobal.unam.mx/global_revista/inundaciones-cdmx-mapa-satelitalriesgo/</a></li>
                        <li>*La última gran inundación de la Ciudad de México*. (s. f.). Centro Nacional de Prevención de Desastres (CENAPRED). <a href="https://www.gob.mx/cenapred/articulos/la-ultima-graninundacion-de-la-ciudad-de-mexico" target="_blank">https://www.gob.mx/cenapred/articulos/la-ultima-graninundacion-de-la-ciudad-de-mexico</a></li>
                    </ul>
                </div>

                <div id="content-conclusiones" class="content-detail">
                    <h3>10. Conclusiones</h3>
                    <p class="section-intro">El proyecto prototípico demuestra la viabilidad de utilizar variables <b>geográficas</b>, sociales y climáticas para crear un índice de riesgo de inundación dinámico.</p>

                    <div class="info-grid two-columns">
                        <div class="info-block">
                            <h4>Hallazgos clave</h4>
                            <ul>
                                <li>La subsidencia y la obstrucción por basura son <b>factores estructurales</b> que superan el impacto de la intensidad de la lluvia en muchas áreas.</li>
                                <li>El modelo <b>algorítmico</b> conceptual $\mathbf{R} = \mathbf{C} + \mathbf{P} + \mathbf{E} \times \mathbf{M}$ proporciona una base sólida para la clasificación del riesgo en tiempo real.</li>
                            </ul>
                        </div>
                        <div class="info-block">
                            <h4>Impacto y futuro</h4>
                            <ul>
                                <li>La herramienta predice con antelación las zonas de riesgo, lo que permite la <b>asignación estratégica de recursos</b> (cuadrillas, bombas).</li>
                                <li>El siguiente paso es integrar el modelo con <b>datos satelitales en tiempo real</b> para mejorar la precisión de las variables $\mathbf{C}$ y $\mathbf{P}$.</li>
                            </ul>
                        </div>
                    </div>
                </div>

            </div>
        </div>

    </section>

</main>

<script>
    // **********************************************
    // LÓGICA DE INTERACCIÓN, NAVEGACIÓN Y TEMA
    // **********************************************
    document.addEventListener('DOMContentLoaded', () => {
        
        // ==========================================================
        // A. LÓGICA DEL CAMBIO DE TEMA Y ALMACENAMIENTO (LOCALSTORAGE)
        // ==========================================================
        const checkbox = document.getElementById('theme-checkbox');
        const root = document.documentElement; // El elemento <html>
        const themeLabel = document.getElementById('theme-label');

        // Función para aplicar el tema
        function applyTheme(isLight) {
            if (isLight) {
                root.classList.add('light-mode');
                if (themeLabel) themeLabel.textContent = 'Modo Oscuro';
                localStorage.setItem('theme', 'light');
            } else {
                root.classList.remove('light-mode');
                if (themeLabel) themeLabel.textContent = 'Modo Claro';
                localStorage.setItem('theme', 'dark');
            }
        }

        // Cargar la preferencia del usuario al inicio
        const savedTheme = localStorage.getItem('theme');
        if (checkbox) {
            if (savedTheme === 'light') {
                checkbox.checked = true;
                applyTheme(true);
            } else {
                // Por defecto, aplica el modo oscuro
                applyTheme(false); 
            }
            
            // Manejar el evento de cambio
            checkbox.addEventListener('change', function() {
                applyTheme(this.checked);
            });
        }


        // ==========================================================
        // B. LÓGICA DE NAVEGACIÓN Y CARRUSEL
        // ==========================================================
        const carouselCards = document.querySelectorAll('.carousel-card');
        const detailSections = document.querySelectorAll('.content-detail');
        const clickSound = document.getElementById('click-sound');

        // Función para cambiar la sección visible
        const showSection = (targetId) => {
            detailSections.forEach(section => {
                section.classList.remove('active');
            });
            const targetSection = document.getElementById(targetId);
            if (targetSection) {
                targetSection.classList.add('active');
            }

            // Actualizar el estado 'active' en las tarjetas del carrusel
            carouselCards.forEach(card => {
                card.classList.remove('active-card');
                if (card.getAttribute('data-target') === targetId) {
                    card.classList.add('active-card');
                }
            });

            // Forzar el desplazamiento al inicio del panel de detalles
            const detailPanel = document.getElementById('detail-panel');
            if (detailPanel) {
                detailPanel.scrollTop = 0;
            }
            
            // Si es la sección del simulador, ejecutar cálculo inicial
            if (targetId === 'content-algoritmo') {
                // Se llama la función que está definida globalmente
                window.calcularRiesgo(); 
            }
        };

        // Escuchadores de eventos para las tarjetas del carrusel
        carouselCards.forEach(card => {
            card.addEventListener('click', () => {
                if (clickSound) {
                    clickSound.play().catch(e => console.log("Audio play prevented: ", e));
                }
                const targetId = card.getAttribute('data-target');
                showSection(targetId);
            });
        });

        // Lógica de navegación del carrusel
        const carouselTrack = document.getElementById('carousel-track');
        const prevBtn = document.querySelector('.prev-btn');
        const nextBtn = document.querySelector('.next-btn');

        let currentIndex = 0;
        const cardWidth = 220; 
        const maxIndex = carouselCards.length - 1;

        const updateCarouselPosition = () => {
            carouselTrack.style.transform = `translateX(-${currentIndex * cardWidth}px)`;
        };

        nextBtn.addEventListener('click', () => {
            if (clickSound) { clickSound.play().catch(e => {}); }
            if (currentIndex < maxIndex) { 
                currentIndex++;
            } else {
                currentIndex = 0; // Loop al inicio
            }
            updateCarouselPosition();
        });

        prevBtn.addEventListener('click', () => {
            if (clickSound) { clickSound.play().catch(e => {}); }
            if (currentIndex > 0) {
                currentIndex--;
            } else {
                currentIndex = maxIndex; // Loop al final
            }
            updateCarouselPosition();
        });

        // Inicializar mostrando la primera sección
        if (carouselCards.length > 0) {
            const initialTarget = carouselCards[0].getAttribute('data-target');
            showSection(initialTarget);
        }

        // ==========================================================
        // C. MANEJO DE INPUTS DEL SIMULADOR (Para actualizar al mover slider)
        // ==========================================================
        const lluviaInput = document.getElementById('lluvia-input');
        const obstruccionInput = document.getElementById('obstruccion-input');
        const exposicionInput = document.getElementById('exposicion-input');
        const alcaldiaSelect = document.getElementById('alcaldia-select');
        
        // Función para actualizar los valores de la simulación al cambiar cualquier input
        function updateSimulationState() {
            // Se asegura de que los span de valor se actualicen 
            if(lluviaInput) document.getElementById('lluvia-val').textContent = lluviaInput.value;
            if(obstruccionInput) document.getElementById('obstruccion-val').textContent = obstruccionInput.value;
            if(exposicionInput) document.getElementById('exposicion-val').textContent = exposicionInput.value;
            
            // Llamar a la función de cálculo inmediatamente
            window.calcularRiesgo(); 
        }

        if (lluviaInput && obstruccionInput && exposicionInput && alcaldiaSelect) {
            // Ejecutar cálculo al cambiar cualquier input (slider o select)
            lluviaInput.addEventListener('input', updateSimulationState);
            obstruccionInput.addEventListener('input', updateSimulationState);
            exposicionInput.addEventListener('input', updateSimulationState);
            alcaldiaSelect.addEventListener('change', updateSimulationState);
        }
    });

    // **********************************************
    // LÓGICA DE LA SIMULACIÓN (Global, llamada por HTML y JS)
    // **********************************************
    function calcularRiesgo() {
        const C = parseFloat(document.getElementById('lluvia-input').value); // Clima/Lluvia
        const P = parseFloat(document.getElementById('obstruccion-input').value); // Obstrucción/Basura
        const E = parseFloat(document.getElementById('exposicion-input').value); // Exposición/Vulnerabilidad
        const M = parseFloat(document.getElementById('alcaldia-select').value); // Multiplicador de riesgo (M)
        const resultadoDiv = document.getElementById('riesgo-texto');
        const resultadoSim = document.getElementById('sim-result');

        // Fórmula conceptual: R = C + P + E * M
        const R = C + P + (E * M);

        let nivelRiesgo = "";
        let colorClass = "";

        if (C === 0.0) {
            nivelRiesgo = "Riesgo Cero";
            colorClass = "risk-zero"; // Verde
        } else if (R < 4.0) {
            nivelRiesgo = "Riesgo Bajo (Amarillo)";
            colorClass = "risk-low"; // Amarillo
        } else if (R >= 4.0 && R < 6.0) {
            nivelRiesgo = "Riesgo Medio (Naranja)";
            colorClass = "risk-medium"; // Naranja
        } else { // R >= 6.0
            nivelRiesgo = "Riesgo Alto (Rojo)";
            colorClass = "risk-high"; // Rojo
        }

        resultadoDiv.textContent = `${nivelRiesgo} | Valor R: ${R.toFixed(2)}`;
        resultadoDiv.className = colorClass; // Aplicar clase de color

        // Mostrar el resultado de la simulación
        resultadoSim.style.display = 'block';

        // Opcional: Sonido al calcular (si se incluyó en el HTML)
        const clickSound = document.getElementById('click-sound');
        if (clickSound) {
            clickSound.currentTime = 0; 
            clickSound.play().catch(e => console.log("Audio play prevented: ", e));
        }
    }
</script>
</body>
</html>
